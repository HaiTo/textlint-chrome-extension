# textlint Chrome Extension

[![wercker status](https://app.wercker.com/status/2f32f541de3ca03d8c8bc95152953ee9/s/master "wercker status")](https://app.wercker.com/project/bykey/2f32f541de3ca03d8c8bc95152953ee9) [![GitHub license](https://img.shields.io/github/license/io-monad/textlint-chrome-extension.svg)](LICENSE) [![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg)](https://github.com/semantic-release/semantic-release)

Chrome Extension that proofreads `<textarea>` using [textlint](http://textlint.github.io/).

:construction: Work In Progress!

:rocket: The extension experimentally supports Firefox ([WebExtensions](https://developer.mozilla.org/en-US/Add-ons/WebExtensions)) and Opera. Check out the "[Experimental support](#experimental-support)" section for more details.

## How to build

    $ npm install
    $ npm run build

To test the built extension, load `dist/chrome` directory into Chrome.

## Tasks

### Watch build

Watch file changes and build it continuously.

    $ npm run watch

### Pack

Produce a production-packaged zip in `packages` directory.

    $ npm run pack

### Release

Versioning and release flow is automated by [semantic-release](https://github.com/semantic-release/semantic-release).

- For each push on `master` branch, [CI](https://app.wercker.com/project/bykey/2f32f541de3ca03d8c8bc95152953ee9) will execute semantic-release after all tests passed.
- Automatically determines the version of a release. `version` field in both `package.json` and `manifest.json` will be set at the release time.
- Automatically creates a git release with a release note that is auto-generated by commit messages.
- Automatically uploads a zip file to Chrome Web Store.

## Experimental support

This extension can also work on browsers implementing Chrome-compatible extension API, such as Firefox and Opera.

Please note that we take Chrome as the main target of this project and thus some features may not work properly on other browsers.

### How to build

    $ gulp build --vendor=moz    // for Firefox
    $ gulp build --vendor=opera  // for Opera

### Installation

For Firefox, please make sure you have Firefox 45 or higher, and follow the instructions at https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Packaging_and_installation to load `dist/moz` directory.

For Opera, please follow the instructions at https://dev.opera.com/extensions/testing/ to load `dist/opera` directory.

### Limitations

Due to the incompatibilities with Chrome's original extension API, there are some limitations on features. These limitations may go away if API supports on browsers are improved.

#### Firefox

- User selections in the popup panel will not be remembered. (Due to [Bug 1258139](https://bugzilla.mozilla.org/show_bug.cgi?id=1258139 "1258139 – storage.local doesn't save data from popup script, only after browser restart extension gets access to saved data"))
- Custom rule settings will not work. (Due to [Bug 1258139](https://bugzilla.mozilla.org/show_bug.cgi?id=1258139 "1258139 – storage.local doesn't save data from popup script, only after browser restart extension gets access to saved data"))
- Icons in result tooltips will not be shown properly. (Due to [Bug 1207394](https://bugzilla.mozilla.org/show_bug.cgi?id=1207394 "1207394 – Make sure web_accessible_resources work with CSP/mixed content blocking"))
- All configurations will not be synced. (Due to [Bug 1220494](https://bugzilla.mozilla.org/show_bug.cgi?id=1220494 "1220494 – [tracking] Implement chrome.storage.sync"))
- textlint processes will not be run in a sandbox.
(i.e. there is no protection around rule executions.)

#### Opera

None.

## License

This software is licensed under [GNU GPLv3](https://www.gnu.org/copyleft/gpl.html). See [LICENSE](LICENSE) for full text of the license.

Before version 2.0.0, this extension was licensed under The MIT License. Since this extension started to bundle some GPLv3 plugins, I decided to re-license the extension under GPLv3.
